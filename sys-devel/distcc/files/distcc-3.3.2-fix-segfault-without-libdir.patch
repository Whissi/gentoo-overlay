https://github.com/distcc/distcc/commit/24f73c5cd8f839bd520eb52e91d0d26e07689373

---
 src/daemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/src/daemon.c
+++ b/src/daemon.c
@@ -166,7 +166,7 @@ static void dcc_warn_masquerade_whitelist(void) {
         rs_log_crit(LIBDIR "/distcc not found. %s", warn);
         dcc_exit(EXIT_COMPILER_MISSING);
     }
-    if (!readdir(e) && !readdir(d)) {
+    if ((!e || !readdir(e)) && (!d || !readdir(d))) {
         rs_log_crit(LIBDIR "/distcc empty. %s", warn);
         dcc_exit(EXIT_COMPILER_MISSING);
     }
